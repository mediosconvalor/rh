<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel de Administrador</title>
</head>
<body>
  <h2>Panel de Administraci贸n</h2>
  <p>Bienvenido, <span id="nombreAdmin"></span></p>

  <h3>Empleados</h3>
  <button onclick="verEmpleados()">Ver empleados</button>
  <table id="tablaEmpleados" style="display:none;">
    <tr><th>Correo</th><th>Nombre</th><th>Departamento</th><th>Puesto</th><th>Acciones</th></tr>
  </table>

  <h3>Solicitudes de Permiso</h3>
  <table id="tablaSolicitudes" style="display:none;">
    <tr><th>Empleado</th><th>Motivo</th><th>Fecha Inicio</th><th>Fecha Fin</th><th>Acci贸n</th></tr>
  </table>

  <button onclick="cerrarSesion()">Cerrar sesi贸n</button>

  <script>
    const admin = JSON.parse(sessionStorage.getItem("admin"));

    if (!admin) {
      alert("Debes iniciar sesi贸n como admin.");
      window.location.href = "index.html";
    } else {
      document.getElementById("nombreAdmin").innerText = admin.nombre;
    }

    function verEmpleados() {
      fetch('https://script.google.com/macros/s/AKfycbxQAYsul69mwg6Zx1KLJsilhJndMU6a3UR4q-6mLF1SsldNX1jpv8HMNEzbpaxF7Jbr/exec?action=verEmpleados')
        .then(res => res.json())
        .then(data => {
          const table = document.getElementById("tablaEmpleados");
          table.style.display = "block";
          data.empleados.forEach(empleado => {
            const row = table.insertRow();
            row.innerHTML = `<td>${empleado.correo}</td><td>${empleado.nombre}</td><td>${empleado.departamento}</td><td>${empleado.puesto}</td><td><button>Editar</button></td>`;
          });
        });
    }

    function cerrarSesion() {
      sessionStorage.removeItem("admin");
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
